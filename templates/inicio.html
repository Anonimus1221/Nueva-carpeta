<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H. Builds - Mapas de Minecraft Premium</title>
    <link rel="stylesheet" href="/static/css/inicio.css">
</head>
<body>
    <div class="particles" id="particles"></div>

    <header>
        <nav>
            <div class="logo">
                <span>🏗️</span> H. Builds
            </div>
            <ul class="nav-links">
                <li><a href="#inicio">Inicio</a></li>
                <li><a href="#mapas">Mapas</a></li>
                <li><a href="#caracteristicas">Características</a></li>
                <li><a href="#contacto">Contacto</a></li>
            </ul>
            <div class="auth-buttons">
                <button class="btn btn-secondary" onclick="window.location.href='/login-page'">Iniciar Sesión</button>
                <button class="btn btn-primary" onclick="window.location.href='/register-page'">Registrarse</button>
            </div>
        </nav>
    </header>

    <section class="hero" id="inicio">
        <div class="hero-content">
            <h1>Mapas Premium de Minecraft</h1>
            <p>Descubre mundos increíbles creados con pasión y dedicación. Aventuras épicas, construcciones
                impresionantes y experiencias únicas te esperan.</p>

            <div class="creator-profile">
                <img src="/static/image/HBU.jpg" alt="H. Builds" class="creator-avatar">
                <div class="creator-info">
                    <h3>H. Builds</h3>
                    <p>Creador de mundos extraordinarios</p>
                    <p> +10,000 descargas |  2 años de experiencia</p>
                </div>
            </div>

            <a href="#mapas" class="btn btn-primary" style="padding: 1rem 3rem; font-size: 1.2rem;">Explorar Mapas</a>
        </div>
    </section>

    <section class="maps-section" id="mapas">
        <h2 class="section-title">🗺️ Nuestros Mapas Premium</h2>
        <div class="maps-grid">
            {% if maps %}
                {% for map in maps %}
                <div class="map-card">
                    {% if map.is_featured %}
                    <span class="map-badge">✨ NUEVO</span>
                    {% elif not map.is_premium %}
                    <span class="map-badge" style="background: #4caf50;">🎁 GRATIS</span>
                    {% endif %}
                    
                    <!-- Carrusel de Imágenes (si tiene gallery_images) -->
                    {% if map.gallery_images %}
                    <div class="map-carousel">
                        {% set gallery = map.gallery_images | from_json %}
                        {% for img_url in gallery %}
                        <img src="{{ img_url }}" class="map-image {% if loop.first %}active{% endif %}" alt="{{ map.title }} {{ loop.index }}">
                        {% endfor %}
                        <button class="carousel-btn prev" onclick="changeSlide(-1, event)">❮</button>
                        <button class="carousel-btn next" onclick="changeSlide(1, event)">❯</button>
                        <div class="carousel-dots"></div>
                    </div>
                    {% else %}
                    <!-- Imagen única si no tiene galería -->
                    <div class="map-carousel">
                        <img src="{{ map.image }}" class="map-image active" alt="{{ map.title }}">
                    </div>
                    {% endif %}

                    <div class="map-content">
                        <h3 class="map-title">{{ map.title }}</h3>
                        <p class="map-description">{{ map.description[:80] }}...</p>
                        
                        <div class="map-footer">
                            {% if map.is_premium and map.price > 0 %}
                            <span class="map-price">${{ map.price }} USD</span>
                            {% else %}
                            <span class="map-price" style="color: #4caf50;">GRATIS</span>
                            {% endif %}
                            <div style="display: flex; gap: 0.5rem;">
                                <button class="btn-details" onclick="openMapModal({{ map.id }})">📋 Ver Detalles</button>
                                {% if map.is_premium and map.price > 0 %}
                                <button class="buy-button" onclick="handlePurchase({{ map.id }}, {{ map.price }})">🛒 Comprar</button>
                                {% else %}
                                <button class="buy-button" style="background: #4caf50;" onclick="handleDownload({{ map.id }})">📥 Descargar</button>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p style="text-align: center; color: #666;">No hay mapas disponibles en este momento.</p>
            {% endif %}
        </div>
    </section>

    <!-- Modal de Detalles del Mapa -->
    <div id="mapModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeMapModal()">&times;</span>
            <div id="mapModalContent"></div>
        </div>
    </div>

    <!-- Sección de Por qué elegir H. Builds -->
    <section class="features-section" id="caracteristicas">
        <h2 class="section-title">¿Por qué elegir H. Builds?</h2>
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon"></div>
                <h4>Calidad Premium</h4>
                <p>Cada detalle cuidadosamente diseñado para ofrecerte la mejor experiencia de juego</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon"></div>
                <h4>Descarga Instantánea</h4>
                <p>Acceso inmediato después de la compra. ¡Comienza a jugar en segundos!</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon"></div>
                <h4>Actualizaciones Gratis</h4>
                <p>Recibe todas las actualizaciones y mejoras sin costo adicional</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon"></div>
                <h4>Soporte 24/7</h4>
                <p>Estamos aquí para ayudarte con cualquier duda o problema</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon"></div>
                <h4>Pago Seguro</h4>
                <p>Transacciones protegidas mediante PayPal</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon"></div>
                <h4>Compatibilidad Total</h4>
                <p>Funciona en todas las versiones de Minecraft</p>
            </div>
        </div>
    </section>

    <footer id="contacto">
        <p>&copy; 2025 H. Builds - Todos los derechos reservados</p>
        <p>Mapas premium de Minecraft creados con pasión</p>
        <p>📧 Contacto: <a href="mailto:contacthectorbuilds@gmail.com" style="color: #ff3333; text-decoration: none;">contacthectorbuilds@gmail.com</a></p>
        <div class="social-links">
            <a href="#" title="Discord"></a>
            <a href="#" title="YouTube"></a>
            <a href="#" title="Twitter"></a>
            <a href="#" title="Instagram"></a>
        </div>
        <p style="margin-top: 1.5rem; color: #666; font-size: 0.9rem;">Contacto: hbuilds@minecraft.com</p>
        <p style="margin-top: 1rem;">
            <a href="/credits" style="color: #ff8c00; text-decoration: none; font-weight: 600; transition: color 0.3s;" 
               onmouseover="this.style.color='#ffd700'" 
               onmouseout="this.style.color='#ff8c00'">
                ✨ Créditos
            </a>
        </p>
    </footer>

    <script src="/static/js/inicio.js"></script>
    <script>
        // ==================== MANEJO DE COMPRA/DESCARGA ====================
        function handlePurchase(price) {
            // Si es gratis (precio 0), redirigir directamente a login para descargar
            if (price === 0) {
                alert('🎁 ¡Este mapa es GRATIS! Inicia sesión para descargarlo.');
                window.location.href = '/login-page';
            } else {
                // Si es premium, redirigir a login para comprar
                window.location.href = '/login-page';
            }
        }

        // ==================== CARRUSEL AUTOMÁTICO ====================
        let currentSlide = 0;
        let currentModalSlide = 0;
        const slides = document.querySelectorAll('.map-carousel .map-image');
        const modalSlides = document.querySelectorAll('.modal-gallery .gallery-image');
        const thumbnails = document.querySelectorAll('.thumbnails img');

        // Carrusel automático de la tarjeta
        function autoSlide() {
            slides[currentSlide].classList.remove('active');
            currentSlide = (currentSlide + 1) % slides.length;
            slides[currentSlide].classList.add('active');
        }

        setInterval(autoSlide, 3000); // Cambia cada 3 segundos

        // Cambiar slide manualmente en la tarjeta
        function changeSlide(direction, event) {
            event.stopPropagation();
            slides[currentSlide].classList.remove('active');
            currentSlide = (currentSlide + direction + slides.length) % slides.length;
            slides[currentSlide].classList.add('active');
        }

        // Cambiar slide en el modal
        function changeModalSlide(direction) {
            modalSlides[currentModalSlide].classList.remove('active');
            thumbnails[currentModalSlide].classList.remove('active');
            currentModalSlide = (currentModalSlide + direction + modalSlides.length) % modalSlides.length;
            modalSlides[currentModalSlide].classList.add('active');
            thumbnails[currentModalSlide].classList.add('active');
        }

        // Ir a un slide específico
        function goToSlide(index) {
            modalSlides[currentModalSlide].classList.remove('active');
            thumbnails[currentModalSlide].classList.remove('active');
            currentModalSlide = index;
            modalSlides[currentModalSlide].classList.add('active');
            thumbnails[currentModalSlide].classList.add('active');
        }

        // ==================== MODAL ====================
        function openMapModal() {
            document.getElementById('mapModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeMapModal() {
            document.getElementById('mapModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Cerrar modal al hacer clic fuera
        window.onclick = function(event) {
            const modal = document.getElementById('mapModal');
            if (event.target == modal) {
                closeMapModal();
            }
        }

        // Cerrar modal con ESC
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeMapModal();
            }
        });
    </script>
</body>
</html>